    @page "/minhas-clinicas"
    @using Microsoft.AspNetCore.Authorization
    @using Shared.DTOs
    @using Client.Services
    @attribute [Authorize(Roles = "User")]
    @inject ClinicService ClinicService
    @inject NavigationManager Nav

    <div class="page-header mb-4">
        <h3>üè• My Clinics</h3>
        <p class="text-muted">Gerencie o estoque das cl√≠nicas atribu√≠das</p>
    </div>

    @if (!string.IsNullOrEmpty(errorMessage))
    {
        <div class="alert alert-danger">@errorMessage</div>
    }

    @if (clinics == null)
    {
        <p>Loading ...</p>
    }
    else if (!clinics.Any())
    {
        <p>There are no clinics registered.</p>
    }
    else
    {
        <div class="row">
            @foreach (var clinic in clinics)
            {
                <div class="col-md-4 mb-4">
                    <div class="card clinic-card">
                        <div class="card-body text-center">
                            <div class="clinic-icon mb-3">
                                <span style="font-size: 3rem;">üè•</span>
                            </div>
                            <h5 class="card-title mb-3">@clinic.Name</h5>
                            <button class="btn btn-primary w-100" @onclick="() => ViewClinicStock(clinic)">
                                Check Inventory
                            </button>
                        </div>
                    </div>
                </div>
            }
        </div>
    }

    @code {
        List<ClinicDto>? clinics;
        string? errorMessage;

        protected override async Task OnInitializedAsync()
        {
            await LoadClinics();
        }

        async Task LoadClinics()
        {
            try
            {
                clinics = await ClinicService.GetMyClinics();
                errorMessage = null;
            }
            catch (Exception ex)
            {
                errorMessage = $"Erro ao carregar cl√≠nicas: {ex.Message}";
            }
        }

        void ViewClinicStock(ClinicDto clinic)
        {
            Nav.NavigateTo($"/clinica/{clinic.Id}/estoque");
        }
    }

    <style>
        .page-header {
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 1rem;
        }

        .clinic-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .clinic-card:hover {
            transform: translateY(-5px);
        }

        .clinic-icon {
            opacity: 0.8;
        }
    </style>

